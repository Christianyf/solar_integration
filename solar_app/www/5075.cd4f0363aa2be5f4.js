"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5075],{5075:(x,m,c)=>{c.r(m),c.d(m,{HomePageModule:()=>C});var g=c(177),h=c(4341),r=c(4742),p=c(8986),f=c(4378),e=c(4438),v=c(1138);function b(o,a){if(1&o&&(e.j41(0,"ion-col",19)(1,"div",20),e.nrm(2,"ion-icon",21),e.j41(3,"ion-label"),e.EFF(4),e.k0s()()()),2&o){const i=a.$implicit;e.R7$(2),e.Y8G("name",i.valor?"checkmark-circle":"close-circle")("color",i.valor?"success":"danger"),e.R7$(2),e.SpI(" ",i.nombre,"")}}const P=[{path:"",component:(()=>{var o;class a{constructor(t){this.remoteService=t}ngOnInit(){this.remoteService.getHomeData().subscribe(t=>{this.temperaturaPanel1=t.temperaturaPanel1,this.temperaturaPanel2=t.temperaturaPanel2,this.temperaturaNodo=t.temperaturaNodo,this.bateriaNivel=t.bateria,this.rssiValor=t.rssi,this.estadosBooleanos=t.estadosBooleanos,this.estadoGeneral=t.estadoInverter,this.irradianciaData=t.irradianciaData,this.potenciaData=t.potenciaData,this.remoteService.getLastHourData().subscribe(n=>{if(n&&n.length>0){const u=n.map(s=>new Date(s.timestamp).toLocaleTimeString()),l=n.map(s=>s.irradiancia),d=n.map(s=>s.potencia);this.crearGrafico(u,l,d)}else console.error("No se encontraron datos hist\xf3ricos para el gr\xe1fico.")})})}getRssiStyle(t){return t>-50?{backgroundColor:"green"}:t>-70?{backgroundColor:"yellow"}:{backgroundColor:"red"}}crearGrafico(t,n,u){const l=document.getElementById("irradianciaPotenciaChart");if(l){const d=l.getContext("2d");d?new f.Ay(d,{type:"line",data:{labels:t,datasets:[{label:"Irradiancia",data:n,borderColor:"blue",fill:!1,cubicInterpolationMode:"monotone",tension:.4},{label:"Potencia",data:u,borderColor:"green",fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0},title:{display:!0,text:"Irradiancia vs Potencia"}},interaction:{intersect:!1},scales:{x:{title:{display:!0,text:"Tiempo"}},y:{title:{display:!0,text:"Valor"},beginAtZero:!0,suggestedMin:0,suggestedMax:600}}}}):console.error("No se pudo obtener el contexto del canvas.")}else console.error('No se encontr\xf3 el elemento canvas con el ID "irradianciaPotenciaChart".')}}return(o=a).\u0275fac=function(t){return new(t||o)(e.rXU(v.K))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-home"]],decls:83,vars:17,consts:[[3,"translucent"],["slot","start"],["href","/login"],["slot","icon-only","name","person"],[2,"width","100%","height","400px"],["id","irradianciaPotenciaChart"],[1,"thermometer"],[1,"mercury"],["color","primary"],[1,"custom-card-grid"],[1,"battery-container"],[1,"battery"],[1,"battery-level"],["color","success"],[1,"rssi-container"],[1,"rssi-indicator",3,"ngStyle"],["size","6",4,"ngFor","ngForOf"],[1,"lcd-screen"],[1,"lcd-text"],["size","6"],[1,"estado-container"],[3,"name","color"]],template:function(t,n){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),e.nrm(4,"ion-icon",3),e.k0s()(),e.j41(5,"ion-title"),e.EFF(6,"Dashboard solar"),e.k0s()()(),e.j41(7,"ion-content")(8,"ion-card")(9,"ion-card-content")(10,"div",4),e.nrm(11,"canvas",5),e.k0s()()(),e.j41(12,"ion-grid")(13,"ion-row")(14,"ion-col")(15,"ion-card")(16,"ion-card-header")(17,"ion-card-title"),e.EFF(18,"Temperatura del panel 1"),e.k0s()(),e.j41(19,"ion-card-content")(20,"div",6),e.nrm(21,"div",7),e.k0s(),e.j41(22,"ion-text",8),e.EFF(23),e.k0s()()()(),e.j41(24,"ion-col")(25,"ion-card")(26,"ion-card-header")(27,"ion-card-title"),e.EFF(28,"Temperatura del panel 2"),e.k0s()(),e.j41(29,"ion-card-content")(30,"div",6),e.nrm(31,"div",7),e.k0s(),e.j41(32,"ion-text",8),e.EFF(33),e.k0s()()()(),e.j41(34,"ion-col")(35,"ion-card")(36,"ion-card-header")(37,"ion-card-title"),e.EFF(38,"Temperatura del nodo"),e.k0s()(),e.j41(39,"ion-card-content")(40,"div",6),e.nrm(41,"div",7),e.k0s(),e.j41(42,"ion-text",8),e.EFF(43),e.k0s()()()()()(),e.j41(44,"ion-grid",9)(45,"ion-row")(46,"ion-col")(47,"ion-card")(48,"ion-card-header")(49,"ion-card-title"),e.EFF(50,"Nivel de Bater\xeda"),e.k0s()(),e.j41(51,"ion-card-content")(52,"div",10)(53,"div",11),e.nrm(54,"div",12),e.k0s()(),e.j41(55,"ion-text",13),e.EFF(56),e.k0s()()()(),e.j41(57,"ion-col")(58,"ion-card")(59,"ion-card-header")(60,"ion-card-title"),e.EFF(61,"RSSI"),e.k0s()(),e.j41(62,"ion-card-content")(63,"div",14),e.nrm(64,"div",15),e.k0s(),e.j41(65,"ion-text"),e.EFF(66),e.k0s()()()()()(),e.j41(67,"ion-card")(68,"ion-card-header")(69,"ion-card-title"),e.EFF(70,"Estados del sistema"),e.k0s()(),e.j41(71,"ion-card-content")(72,"ion-grid")(73,"ion-row"),e.DNE(74,b,5,3,"ion-col",16),e.k0s()()()(),e.j41(75,"ion-card")(76,"ion-card-header")(77,"ion-card-title"),e.EFF(78,"Estado del inverter"),e.k0s()(),e.j41(79,"ion-card-content")(80,"div",17)(81,"span",18),e.EFF(82),e.k0s()()()()()),2&t&&(e.Y8G("translucent",!0),e.R7$(21),e.xc7("height",2*n.temperaturaPanel1,"%"),e.R7$(2),e.SpI("",n.temperaturaPanel1," \xb0C"),e.R7$(8),e.xc7("height",2*n.temperaturaPanel2,"%"),e.R7$(2),e.SpI("",n.temperaturaPanel2," \xb0C"),e.R7$(8),e.xc7("height",2*n.temperaturaNodo,"%"),e.R7$(2),e.SpI("",n.temperaturaNodo," \xb0C"),e.R7$(11),e.xc7("width",n.bateriaNivel+"%"),e.R7$(2),e.SpI("",n.bateriaNivel,"%"),e.R7$(8),e.Y8G("ngStyle",n.getRssiStyle(n.rssiValor)),e.R7$(2),e.SpI("",n.rssiValor," dBm"),e.R7$(8),e.Y8G("ngForOf",n.estadosBooleanos),e.R7$(8),e.JRh(n.estadoGeneral))},dependencies:[g.Sq,g.B3,r.Jm,r.QW,r.b_,r.I9,r.ME,r.tN,r.hU,r.W9,r.lO,r.eU,r.iq,r.he,r.ln,r.IO,r.BC,r.ai],styles:['@charset "UTF-8";canvas[_ngcontent-%COMP%]{width:100%;height:400px}.thermometer[_ngcontent-%COMP%]{width:30px;height:100px;border:2px solid #ccc;border-radius:15px;background:#e0e0e0;margin:0 auto;position:relative;overflow:hidden}.mercury[_ngcontent-%COMP%]{width:100%;background:linear-gradient(to top,#0a287d,red);position:absolute;bottom:0;transition:height .5s ease}ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{text-align:center;width:100%}ion-card-title[_ngcontent-%COMP%]{text-align:center;font-size:smaller}.battery-container[_ngcontent-%COMP%]{width:100%;padding:5px}.battery[_ngcontent-%COMP%]{width:100%;height:25px;background-color:#e0e0e0;border-radius:5px;position:relative}.battery-level[_ngcontent-%COMP%]{height:100%;background-color:green;border-radius:5px;transition:width .3s ease}.battery-level[_ngcontent-%COMP%]{background-color:#4caf50}.battery-level[style*="width: 10%"][_ngcontent-%COMP%]{background-color:red}.battery-level[style*="width: 25%"][_ngcontent-%COMP%]{background-color:#ff0}.rssi-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;padding:10px}.rssi-indicator[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background-color:#f44336;transition:background-color .3s ease}.custom-card-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{display:flex;align-items:stretch}.custom-card-grid[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{display:flex}.custom-card-grid[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:space-between}.lcd-screen[_ngcontent-%COMP%]{background-color:#1a1a1a;border-radius:10px;padding:10px 20px;text-align:center;box-shadow:inset 0 0 10px #000;display:flex;justify-content:center;align-items:center;height:60px}.lcd-text[_ngcontent-%COMP%]{color:#0aff0a;font-family:Courier New,Courier,monospace;font-size:24px;text-shadow:0px 0px 5px #0aff0a;white-space:nowrap}']}),a})()}];let y=(()=>{var o;class a{}return(o=a).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[p.iI.forChild(P),p.iI]}),a})(),C=(()=>{var o;class a{}return(o=a).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[g.MD,h.YN,r.bv,y]}),a})()}}]);