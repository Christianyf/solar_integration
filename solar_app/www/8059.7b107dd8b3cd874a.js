"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8059],{8059:(S,u,s)=>{s.r(u),s.d(u,{StatusPageModule:()=>F});var l=s(177),p=s(4341),o=s(4742),m=s(8986),g=s(4378),t=s(4438),v=s(1138);const f=(e,r)=>({"estado-activo":e,"estado-inactivo":r});function P(e,r){if(1&e&&(t.j41(0,"ion-col",15)(1,"ion-card",16)(2,"ion-card-content",17),t.nrm(3,"ion-icon",18),t.j41(4,"div",19)(5,"ion-label",20),t.EFF(6),t.k0s(),t.j41(7,"ion-label",21),t.EFF(8),t.k0s()()()()()),2&e){const n=r.$implicit;t.R7$(),t.Y8G("ngClass",t.l_i(6,f,n.valor,!n.valor)),t.R7$(2),t.Y8G("name",n.valor?"checkmark-circle":"close-circle")("color",n.valor?"success":"danger"),t.R7$(3),t.JRh(n.nombre),t.R7$(),t.Y8G("color",n.valor?"success":"danger"),t.R7$(),t.SpI(" ",n.valor?"Activo":"Inactivo"," ")}}const C=[{path:"",component:(()=>{var e;class r{constructor(a){this.remoteService=a,this.estadosBooleanos=[],this.estadoGeneral="",this.irradiancia24h=[],this.potencia24h=[],this.temperaturasPanel1=[],this.temperaturasPanel2=[],this.temperaturasNodo=[]}ngOnInit(){this.remoteService.getStatusData().subscribe(a=>{this.estadosBooleanos=a.estadosSistema,this.estadoGeneral=a.estadosInverter,this.irradiancia24h=a.irradiancia24h,this.potencia24h=a.potencia24h,this.temperaturasPanel1=a.temperaturasPanel1,this.temperaturasPanel2=a.temperaturasPanel2,this.temperaturasNodo=a.temperaturasNodo,this.crearGrafico("irradiancia24hChart",this.irradiancia24h,"Irradiancia (W/m\xb2)"),this.crearGrafico("potencia24hChart",this.potencia24h,"Potencia (W)"),this.crearGrafico("tempPanel1Chart",this.temperaturasPanel1,"Temperatura Panel 1 (\xb0C)"),this.crearGrafico("tempPanel2Chart",this.temperaturasPanel2,"Temperatura Panel 2 (\xb0C)"),this.crearGrafico("tempNodoChart",this.temperaturasNodo,"Temperatura Nodo (\xb0C)")})}procesarEstados(a){return["Carga/Descarga bater\xeda","Conexi\xf3n inverter","Estado conversor","Estado cargador","Timeout","Estado ESP32"].map((c,d)=>({nombre:c,valor:a>>5-d&1}))}obtenerEstadoInverter(a){return["Detenido","Off-grid","Stand-by","On-grid"][3&a]}crearGrafico(a,i,c){const d=document.getElementById(a);if(d){const h=d.getContext("2d");h&&new g.Ay(h,{type:"line",data:{labels:Array.from({length:24},(M,E)=>`${E}h`),datasets:[{label:c,data:i,borderColor:"blue",fill:!1,cubicInterpolationMode:"monotone",tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0},title:{display:!0,text:c}},scales:{x:{title:{display:!0,text:"Hora"}},y:{title:{display:!0,text:c},beginAtZero:!0}}}})}}}return(e=r).\u0275fac=function(a){return new(a||e)(t.rXU(v.K))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-estatus"]],decls:62,vars:3,consts:[[3,"translucent"],["slot","start"],["href","/login"],["slot","icon-only","name","person"],[2,"width","100%","height","400px"],["id","irradiancia24hChart"],["id","potencia24hChart"],[2,"width","100%","height","200px"],["id","tempPanel1Chart"],["color","primary"],["id","tempPanel2Chart"],["id","tempNodoChart"],["size","12",4,"ngFor","ngForOf"],[1,"lcd-screen"],[1,"lcd-text"],["size","12"],[1,"estado-card",3,"ngClass"],[1,"estado-card-content"],[1,"estado-icon",3,"name","color"],[1,"estado-text"],[1,"estado-nombre"],[1,"estado-status",3,"color"]],template:function(a,i){1&a&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),t.nrm(4,"ion-icon",3),t.k0s()(),t.j41(5,"ion-title"),t.EFF(6,"Estado del sistema"),t.k0s()()(),t.j41(7,"ion-content")(8,"ion-card")(9,"ion-card-header")(10,"ion-card-title"),t.EFF(11,"Irradiancia - \xdaltimas 24h"),t.k0s()(),t.j41(12,"ion-card-content")(13,"div",4),t.nrm(14,"canvas",5),t.k0s()()(),t.j41(15,"ion-card")(16,"ion-card-header")(17,"ion-card-title"),t.EFF(18,"Potencia - \xdaltimas 24h"),t.k0s()(),t.j41(19,"ion-card-content")(20,"div",4),t.nrm(21,"canvas",6),t.k0s()()(),t.j41(22,"ion-card")(23,"ion-card-header")(24,"ion-card-title"),t.EFF(25,"Temperaturas - \xdaltimas 24h"),t.k0s()(),t.j41(26,"ion-card-content")(27,"ion-grid")(28,"ion-row")(29,"ion-col")(30,"div",7),t.nrm(31,"canvas",8),t.k0s(),t.j41(32,"ion-text",9),t.EFF(33,"Panel 1"),t.k0s()()(),t.j41(34,"ion-row")(35,"ion-col")(36,"div",7),t.nrm(37,"canvas",10),t.k0s(),t.j41(38,"ion-text",9),t.EFF(39,"Panel 2"),t.k0s()()(),t.j41(40,"ion-row")(41,"ion-col")(42,"div",7),t.nrm(43,"canvas",11),t.k0s(),t.j41(44,"ion-text",9),t.EFF(45,"Nodo"),t.k0s()()()()()(),t.j41(46,"ion-card")(47,"ion-card-header")(48,"ion-card-title"),t.EFF(49,"Estados del Sistema"),t.k0s()(),t.j41(50,"ion-card-content")(51,"ion-grid")(52,"ion-row"),t.DNE(53,P,9,9,"ion-col",12),t.k0s()()()(),t.j41(54,"ion-card")(55,"ion-card-header")(56,"ion-card-title"),t.EFF(57,"Estado del Inverter"),t.k0s()(),t.j41(58,"ion-card-content")(59,"div",13)(60,"span",14),t.EFF(61),t.k0s()()()()()),2&a&&(t.Y8G("translucent",!0),t.R7$(53),t.Y8G("ngForOf",i.estadosBooleanos),t.R7$(8),t.JRh(i.estadoGeneral))},dependencies:[l.YU,l.Sq,o.Jm,o.QW,o.b_,o.I9,o.ME,o.tN,o.hU,o.W9,o.lO,o.eU,o.iq,o.he,o.ln,o.IO,o.BC,o.ai],styles:[".estado-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.lcd-screen[_ngcontent-%COMP%]{background-color:#000;color:#0f0;font-family:Courier New,Courier,monospace;text-align:center;padding:10px;border-radius:5px}.lcd-text[_ngcontent-%COMP%]{font-size:20px}.estado-card[_ngcontent-%COMP%]{display:flex;align-items:center;box-shadow:0 4px 6px #0000001a;border-radius:8px;margin-bottom:10px;padding:10px;transition:transform .3s}.estado-card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.estado-activo[_ngcontent-%COMP%]{border-left:5px solid var(--ion-color-success)}.estado-inactivo[_ngcontent-%COMP%]{border-left:5px solid var(--ion-color-danger)}.estado-card-content[_ngcontent-%COMP%]{display:flex;align-items:center}.estado-icon[_ngcontent-%COMP%]{font-size:2.5rem;margin-right:15px}.estado-text[_ngcontent-%COMP%]{display:flex;flex-direction:column}.estado-nombre[_ngcontent-%COMP%]{font-weight:700;font-size:1rem}.estado-status[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-medium)}"]}),r})()}];let x=(()=>{var e;class r{}return(e=r).\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[m.iI.forChild(C),m.iI]}),r})(),F=(()=>{var e;class r{}return(e=r).\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[l.MD,p.YN,o.bv,x]}),r})()}}]);