"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3485],{3485:(M,h,i)=>{i.r(h),i.d(h,{LoginPageModule:()=>b});var d=i(177),l=i(4341),n=i(4742),g=i(8986),e=i(4438),m=i(1138);function s(t,a){if(1&t&&(e.j41(0,"div",11)(1,"ion-text",12),e.EFF(2),e.k0s()()),2&t){const c=e.XpG();e.R7$(2),e.JRh(c.errorMessage)}}function p(t,a){1&t&&e.nrm(0,"ion-spinner",13)}function f(t,a){1&t&&(e.j41(0,"span"),e.EFF(1,"Entrar"),e.k0s())}const L=[{path:"",component:(()=>{var t;class a{constructor(r,o){this.remoteService=r,this.router=o,this.username="",this.password="",this.errorMessage="",this.isLoading=!1}ngOnInit(){}login(r){r.preventDefault(),this.username&&this.password?(this.errorMessage="",this.isLoading=!0,this.remoteService.login(this.username,this.password).subscribe({next:o=>{console.log("Acceso correcto:",o),localStorage.setItem("userRole",o.user.rol),this.router.navigate(["/tabs"])},error:o=>{console.error("Acceso incorrecto:",o),this.errorMessage="Credenciales incorrectas. Intenta de nuevo."},complete:()=>{this.isLoading=!1}})):this.errorMessage="Por favor, completa todos los campos."}}return(t=a).\u0275fac=function(r){return new(r||t)(e.rXU(m.K),e.rXU(g.Ix))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-login"]],decls:24,vars:7,consts:[[3,"translucent"],[1,"ion-padding"],["src","assets/imgs/login.png","alt","Login Image",1,"img-login"],[3,"submit"],["position","floating"],["name","username","type","text","required","",3,"ngModelChange","ngModel"],["name","password","type","password","required","",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["expand","block","type","submit",3,"disabled"],["name","dots",4,"ngIf"],[4,"ngIf"],[1,"error-message"],["color","danger"],["name","dots"]],template:function(r,o){1&r&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Iniciar sesi\xf3n"),e.k0s()()(),e.j41(4,"ion-content",1),e.nrm(5,"img",2),e.j41(6,"ion-card")(7,"ion-card-header")(8,"ion-card-title"),e.EFF(9,"Bienvenido"),e.k0s()(),e.j41(10,"ion-card-content")(11,"form",3),e.bIt("submit",function(u){return o.login(u)}),e.j41(12,"ion-item")(13,"ion-label",4),e.EFF(14,"Usuario"),e.k0s(),e.j41(15,"ion-input",5),e.mxI("ngModelChange",function(u){return e.DH7(o.username,u)||(o.username=u),u}),e.k0s()(),e.j41(16,"ion-item")(17,"ion-label",4),e.EFF(18,"Contrase\xf1a"),e.k0s(),e.j41(19,"ion-input",6),e.mxI("ngModelChange",function(u){return e.DH7(o.password,u)||(o.password=u),u}),e.k0s()(),e.DNE(20,s,3,1,"div",7),e.j41(21,"ion-button",8),e.DNE(22,p,1,0,"ion-spinner",9)(23,f,2,0,"span",10),e.k0s()()()()()),2&r&&(e.Y8G("translucent",!0),e.R7$(15),e.R50("ngModel",o.username),e.R7$(4),e.R50("ngModel",o.password),e.R7$(),e.Y8G("ngIf",o.errorMessage),e.R7$(),e.Y8G("disabled",o.isLoading),e.R7$(),e.Y8G("ngIf",o.isLoading),e.R7$(),e.Y8G("ngIf",!o.isLoading))},dependencies:[d.bT,l.qT,l.BC,l.cb,l.YS,l.vS,l.cV,n.Jm,n.b_,n.I9,n.ME,n.tN,n.W9,n.eU,n.$w,n.uz,n.he,n.w2,n.IO,n.BC,n.ai,n.Gw],styles:[".img-login[_ngcontent-%COMP%]{width:30%;display:block;margin:30px auto}"]}),a})()}];let P=(()=>{var t;class a{}return(t=a).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[g.iI.forChild(L),g.iI]}),a})(),b=(()=>{var t;class a{}return(t=a).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[d.MD,l.YN,n.bv,P]}),a})()},1138:(M,h,i)=>{i.d(h,{K:()=>n});var d=i(4438),l=i(1626);let n=(()=>{var g;class e{constructor(s){this.http=s,this.baseUrl="http://localhost:8100"}login(s,p){return this.http.post(`${this.baseUrl}/login`,{username:s,password:p})}getHomeData(){return this.http.get(`${this.baseUrl}/api/home`)}getStatusData(){return this.http.get(`${this.baseUrl}/api/status`)}getUsers(){return this.http.get(`${this.baseUrl}/api/users`)}getHistoricalData(){return this.http.get(`${this.baseUrl}/api/historical`)}getLastHourData(){return this.http.get(`${this.baseUrl}/api/last-hour-data`)}addUser(s){return this.http.post(`${this.baseUrl}/api/users`,s)}updateUser(s,p){return this.http.put(`${this.baseUrl}/api/users/${s}`,p,{headers:{"Content-Type":"application/json"}})}deleteUser(s){return this.http.delete(`${this.baseUrl}/api/users/${s}`,{headers:{"Content-Type":"application/json"}})}}return(g=e).\u0275fac=function(s){return new(s||g)(d.KVO(l.Qq))},g.\u0275prov=d.jDH({token:g,factory:g.\u0275fac,providedIn:"root"}),e})()}}]);